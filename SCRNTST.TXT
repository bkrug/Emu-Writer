       DEF  RUNTST
       DEF  LINLST,FMTLST,MGNLST
       REF  MAKETX,PRINTL,OPENF,CLOSEF

* We define LINLST,FMTLST,MGNLST here as
* mocks. They would be defined in a 
* source file.
LINLST DATA 16
       DATA LIN1A,LIN1B,LIN1C,LIN1D
       DATA LIN1E
       DATA LIN2
       DATA LIN3A,LIN3B,LIN3C,LIN3D
       DATA LIN3E,LIN3F
       DATA LIN4
       DATA LIN5
       DATA LIN6A,LIN6B
       
* bold, italic, underline, super, sub
FMTLST DATA 15,0
* Superscript
       DATA 4,
       BYTE 8,>10
       DATA 4,
       BYTE 9,>00
* Superscript
       DATA 5,
       BYTE 4,>10
       DATA 5,
       BYTE 5,>00
* Subscript
       DATA 5,
       BYTE 9,>08
       DATA 5,
       BYTE 9,>00
* Bold
       DATA 8
       BYTE 37,>80
       DATA 8
       BYTE 46,>00
* Italic
       DATA 9
       BYTE 9,>40
       DATA 9
       BYTE 15,>00
* Underline
       DATA 9
       BYTE 34,>20
       DATA 9
       BYTE 47,>00
* Italic, then superscript
       DATA 11
       BYTE 8,>20
       DATA 11
       BYTE 9,>30
       DATA 11
       BYTE 10,>00
       
MGNLST DATA 6,0,0
* Indented
       DATA 0,>0A0A,>000A
       DATA 5,>0A0A,>0000
* Hanging Indent
       DATA 6,>0A0A,>00F6
       DATA 12,>0A0A,>0000
* Center
       DATA 13,>0A8A,0
       DATA 14,>0A0A,0
       
* 2nd byte is irrelevant
TABLST DATA 1,0
       DATA 14,TAB1
       
TAB1   BYTE 3
       BYTE 16
       BYTE 50
       BYTE 94

* This paragraph is indented in the
* first line.
LIN1A  BYTE 48
       TEXT 'In physics, mass–energy equivalence states that '
LIN1B  BYTE 60
       TEXT 'anything having mass has an equivalent amount of energy and '
LIN1C  BYTE 55
       TEXT 'vice versa, with these fundamental quantities directly '
LIN1D  BYTE 52
       TEXT 'relating to one another by Albert Einstein's famous '
LIN1E  BYTE 11
       TEXT 'formula:1'
       BYTE 13,10
LIN2   BYTE 13
       TEXT 'E=mc2   H2O'
       BYTE 13,10
* This paragraph has a hanging indent.
* Word "Similiarly" is bold and
* "having" is italic.
* "corresponding" is underlined.
* "c2" is italic with "2" superscript.
LIN3A  BYTE 58
       TEXT 'This formula states that the equivalent energy (E) can be '
LIN3B  BYTE 54
       TEXT 'calculated as the mass (m) multiplied by the speed of '
LIN3C  BYTE 48
       TEXT 'light (c = about 3*108 m/s) squared. Similarly, '
LIN3D  BYTE 55
       TEXT 'anything having energy exhibits a corresponding mass m '
LIN3E  BYTE 52
       TEXT 'given by its energy E divided by the speed of light '
LIN3F  BYTE 13
       TEXT 'squared c2.'
       BYTE 13,10
LIN4   BYTE 2
       BYTE 13,10
LIN5   BYTE 50
       TEXT 'Countries and areas ranked by population in 2017'
       BYTE 13,10
LIN6A  BYTE LIN6B-LIN6A+1
       TEXT 'Rank'
       BYTE 9
       TEXT 'Country'
       BYTE 9
       TEXT 'UN region'
       BYTE 9
       TEXT 'Population'
       BYTE 13,10
LIN6B  BYTE LIN7-LIN6B+1
       TEXT '1'
       BYTE 9
       TEXT 'China'
       BYTE 9
       TEXT 'Eastern Asia'
       BYTE 9
       TEXT '1,409,517,397'
       BYTE 13,10
LIN7

* Users will see inverse images of
* letters to represent changes in
* formatting.
* >C2   Highlighted B
* >C9   Highlighted I
* >D5   Highlighted U
* >AB   Highlighted +
* >AD   Highlighted -
* >E2   Highlighted b
* >E5   Highlighted e

* Expected Display Lines
DSP1A  TEXT '     In physics, mass–energy equivalence states that '
CUR1A  TEXT 'XXXXX                                                '
DSP1B  TEXT 'anything having mass has an equivalent amount of energy and '
CUR1B  TEXT '                                                     '
DSP1C  TEXT 'vice versa, with these fundamental quantities directly '
CUR1C  TEXT '                                                       '
DSP1D  TEXT 'relating to one another by Albert Einstein's famous '
CUR1D  TEXT '                                                    '
DSP1E  TEXT 'formula:'
       BYTE >AB,>E2
       TEXT '1'
	   BYTE >AB,>E5
	   TEXT ' '
CUR1E  TEXT '         X  X '   
DSP2   TEXT 'E=mc'
       BYTE >AB,>E2
       TEXT '2'
       BYTE >AB,>E5
       TEXT '   H'
       BYTE >AD,>E2
	   TEXT '2'
       BYTE >AD,>E5
	   TEXT 'O '
CUR2   TEXT '     X  X     X  X  '
* This paragraph has a hanging indent.
* Word "Similiarly" is bold and
* "having" is italic.
* "corresponding" is underlined.
* "c2" is italic with "2" superscript.
DSP3A  TEXT 'This formula states that the equivalent energy (E) can be '
CUR3A  TEXT '                                                          '
DSP3B  TEXT '     calculated as the mass (m) multiplied by the speed of '
CUR3B  TEXT 'XXXXX                                                      '
DSP3C  TEXT '     light (c = about 3*108 m/s) squared. '
       BYTE >C2,>E2
       TEXT 'Similarly,'
       BYTE >C2,>E5
	   TEXT ' '
CUR3C  TEXT 'XXXXX                                      X           X '
DSP3D  TEXT '     anything '
       BYTE >C9,>E2
       TEXT 'having'
	   BYTE >C9,>E5
	   TEXT ' energy exhibits a '
	   BYTE >D5,>E2
	   TEXT 'corresponding'
	   BYTE >D5,>E5
	   TEXT ' mass m '
CUR3D  TEXT 'XXXXX          X       X                    X              X        '
DSP3E  TEXT '     given by its energy E divided by the speed of light '
CUR3E  TEXT 'XXXXX                                                    '
DSP3F  TEXT 'squared '
       BYTE >C9,>E2
       TEXT 'c'
	   BYTE >AB,>E2
	   TEXT '2'
	   BYTE >C9,>E5,>AB,>E5
	   TEXT '. '
CUR3F  TEXT '         X  X  X X  '
DSP4   TEXT ' '
CUR4   TEXT ' '
DSP5   TEXT '      Countries and areas ranked by population in 2017 '
CUR5   TEXT 'XXXXXX                                                 '
DSP6A  TEXT 'Rank    Country          UN region             Population '
CUR6A  TEXT '     XXX        XXXXXXXXX          XXXXXXXXXXXX
LIN6B  TEXT '1       China            Eastern Asia          1,409,517,397 '
CUR6B  TEXT '  XXXXXX      XXXXXXXXXXX             XXXXXXXXX
LIN7